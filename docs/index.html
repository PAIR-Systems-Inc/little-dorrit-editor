<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Dorrit Editor Benchmark Leaderboard</title>

    <!-- Tabulator CSS and JS from CDN -->
    <link href="https://unpkg.com/tabulator-tables@6.3.1/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@6.3.1/dist/js/tabulator.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">

    <style>
        /*
        1. CSS Variables & Base Styles
        2. Layout & Grid Utilities
        3. Typography
        4. Components
        5. Media Queries
        */

        /* 1. CSS Variables & Base Styles */
        :root {
            --primary-color: #3a5a78;
            --secondary-color: #f5f5f5;
            --accent-color: #e76f51;
            --text-color: #333;
            --bg-color: #fff;
            --border-color: #ddd;
            --muted-text: #666;
            --footer-text: #7f8c8d;
            --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 0 5px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 0 20px rgba(0, 0, 0, 0.15);
            --code-bg: #282C34;
            --container-width: 800px;
            --medal-gold: #FFD700;
            --medal-silver: #C0C0C0;
            --medal-bronze: #CD7F32;
            --score-good: #4CAF50;
            --score-medium: #FFC107;
            --score-low: #F44336;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        /* 2. Layout & Grid Utilities */
        .content-wrapper {
            display: flex;
            flex-direction: column;
        }

        .metrics {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 40px;
        }

        .file-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .file-summary-chart {
            width: 65%;
            height: 300px;
        }

        .file-summary-stats {
            width: 30%;
        }

        /* 3. Typography */
        h1 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            font-size: 2.2em;
            margin-bottom: 0.3em;
        }

        h2, h3 {
            color: var(--primary-color);
            margin-top: 0;
        }

        .section-title {
            color: var(--primary-color);
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .subtitle {
            font-style: italic;
            color: var(--muted-text);
            font-size: 1.1em;
            margin-bottom: 30px;
            max-width: var(--container-width);
            margin-left: auto;
            margin-right: auto;
        }

        .example-caption {
            text-align: center;
            margin-top: 8px;
            font-style: italic;
            color: var(--muted-text);
        }

        /* 4. Components */
        /* Container utilities */
        .centered-container {
            margin-left: auto;
            margin-right: auto;
        }

        .fixed-width-container {
            max-width: var(--container-width);
        }

        /* Header and footer */
        header {
            margin-bottom: 20px;
            text-align: center;
            position: relative;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.9em;
            color: var(--footer-text);
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .updated {
            text-align: right;
            font-style: italic;
            color: var(--footer-text);
            font-size: 0.85em;
            margin-top: 30px;
        }

        /* Cards and containers */
        .description {
            max-width: var(--container-width);
            margin: 0 auto 40px;
            text-align: left;
            background-color: var(--secondary-color);
            border-radius: 5px;
            box-shadow: var(--shadow-sm);
        }

        .metric-card {
            flex: 1;
            background-color: var(--secondary-color);
            padding: 20px;
            border-radius: 5px;
            box-shadow: var(--shadow-sm);
            text-align: center;
        }

        .toc {
            max-width: var(--container-width);
            margin: 0 auto 30px;
            background-color: var(--secondary-color);
            border-radius: 5px;
            padding: 15px 25px;
            box-shadow: var(--shadow-sm);
        }

        .toc h2 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .toc ul {
            padding-left: 20px;
            margin-bottom: 0;
        }

        .toc li {
            margin-top: 8px;
        }

        .toc a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        /* Portrait styling */
        .portrait-container {
            text-align: center;
            margin: 0 auto 40px;
            position: relative;
            width: 100%;
            max-width: 280px;
        }

        .portrait-crop {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            box-shadow: var(--shadow-md);
        }

        .portrait {
            position: absolute;
            width: 200px;
            top: -10px;
            left: -10px;
        }

        /* Metric elements */
        .metric-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 5px;
        }

        .metric-model {
            font-size: 0.85em;
            color: var(--muted-text);
            font-style: italic;
            margin-top: 2px;
        }

        /* Medal indicators */
        .medal {
            display: inline-block;
            width: 22px;
            height: 22px;
            line-height: 22px;
            text-align: center;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            margin-right: 8px;
        }

        .gold {
            background-color: var(--medal-gold);
            box-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
        }

        .silver {
            background-color: var(--medal-silver);
            box-shadow: 0 0 5px rgba(192, 192, 192, 0.5);
        }

        .bronze {
            background-color: var(--medal-bronze);
            box-shadow: 0 0 5px rgba(205, 127, 50, 0.5);
        }

        /* Performance indicators */
        .performance-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .perfect-score {
            background-color: var(--score-good);
        }

        .good-score {
            background-color: var(--score-medium);
        }

        .low-score {
            background-color: var(--score-low);
        }

        /* Table styling */
        .tabulator {
            margin: 25px 0;
            box-shadow: var(--shadow-lg);
            border-radius: 5px;
            overflow: hidden;
        }

        /* Image containers */
        .example-image {
            margin: 0 auto 0;
            text-align: center;
            max-width: 620px;
            display: block;
        }

        .example-image img {
            width: 100%;
            max-width: 620px;
        }

        /* Code styling */
        .code-window {
            background-color: var(--code-bg);
            border-radius: 10px;
            padding: 1rem;
            margin: 2rem 0;
            font-family: 'Fira Code', monospace;
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .code-header {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .code-header::before {
            content: "Ground truth output";
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #ccc;
            font-weight: 600;
            font-size: 0.95rem;
        }

        pre {
            margin: 0;
            overflow: auto;
        }

        code {
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .post-content {
            max-width: var(--container-width);
            margin: 0 auto;
        }

        /* 5. Media Queries */
        @media (min-width: 768px) {
            .content-wrapper {
                flex-direction: row;
                align-items: flex-start;
                gap: 40px;
                margin-bottom: 40px;
            }

            .description {
                flex: 1;
                margin: 0;
                order: 1;
            }

            .portrait-container {
                width: 210px;
                margin: 0 0 20px 20px;
                order: 2;
                float: right;
                shape-outside: ellipse(50% 50%);
            }
        }

        @media (max-width: 768px) {
            .metrics {
                flex-direction: column;
            }

            .file-summary {
                flex-direction: column;
            }

            .file-summary-chart,
            .file-summary-stats {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Little Dorrit Editor Benchmark</h1>
        <div class="subtitle centered-container fixed-width-container">
            More than 150 years after her quiet rebellion in the Marshalsea,
            Little Dorrit returns—with red pen in hand—to help evaluate the
            judgment of modern language models.
        </div>
    </header>

    <div class="metrics" id="metrics">
        <div class="metric-card">
            <div class="metric-title">Top Model</div>
            <div class="metric-value" id="top-model">Loading...</div>
            <div class="metric-model" id="top-model-name">-</div>
        </div>
        <div class="metric-card">
            <div class="metric-title">Best F1 Score</div>
            <div class="metric-value" id="best-f1-score">Loading...</div>
            <div class="metric-model" id="best-f1-model">-</div>
        </div>
        <div class="metric-card">
            <div class="metric-title">Best Precision</div>
            <div class="metric-value" id="best-precision">Loading...</div>
            <div class="metric-model" id="best-precision-model">-</div>
        </div>
        <div class="metric-card">
            <div class="metric-title">Best Recall</div>
            <div class="metric-value" id="best-recall">Loading...</div>
            <div class="metric-model" id="best-recall-model">-</div>
        </div>
    </div>

    <h2 class="section-title" id="leaderboard">Performance Leaderboard</h2>
    <div id="leaderboard-table"></div>

    <h2 class="section-title" id="detailed">Detailed Model Performance</h2>
    <div id="model-performance-table"></div>

    <!-- Table of Contents -->
    <div class="toc centered-container fixed-width-container">
        <h2>Further Contents</h2>
        <ul>
            <li><a href="#about">About the Benchmark</a></li>
            <li><a href="#how-it-works">How It Works</a>
                <ul>
                    <li><a href="#the-task">The Task</a></li>
                    <li><a href="#example-input">Example Input</a></li>
                    <li><a href="#expected-output">Expected Output</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="content-wrapper  centered-container fixed-width-container" id="about">
        <div class="description">
            <h2>About the Benchmark</h2>
            <div class="portrait-container">
                <div class="portrait-crop">
                  <img src="/dorrit.png" alt="Portrait of Little Dorrit" class="portrait" title="Little Dorrit, from Charles Dickens' novel">
                </div>
            </div>
            <p>
                This benchmark evaluates the ability of multimodal language models to interpret handwritten editorial corrections in printed text.
                Using annotated scans from Charles Dickens' "Little Dorrit," we challenge models to accurately capture human editing intentions.
            </p>
            <p>
                Models are assessed on their ability to detect and interpret various types of editorial marks including insertions, deletions,
                replacements, punctuation changes, capitalization corrections, and text reordering.
            </p>
            <p>
                The benchmark consists of several document pages containing Dickens' original manuscript with editorial marks and corrections.
                These documents represent the kind of annotations an editor might make when reviewing a text for publication, providing
                a realistic test of how well AI models can understand human editing practices.
            </p>
        </div>
    </div>

    <div class="post-content centered-container fixed-width-container">
    <h2 class="section-title" id="how-it-works">How It Works</h2>
    <p>
        Models are presented with scanned pages containing handwritten editorial
        marks and are asked to identify each edit, its type, location, and the
        text before and after the edit.
    </p>

    <h3 id="the-task">The Task</h3>

    <p>
      Each page in the benchmark consists of printed text overlaid with
      handwritten editorial annotations. Models are tasked with detecting and
      interpreting all such editorial corrections and outputting them in
      structured <code>JSON</code> format.
    </p>

    <p>
      For each correction, the model must identify:
    </p>

    <ul class="task-details">
      <li><strong>Type of edit:</strong> One of <code>insertion</code>, <code>deletion</code>, <code>replacement</code>, <code>punctuation</code>, <code>capitalization</code>, or <code>reordering</code></li>
      <li><strong>Original text:</strong> The text as it appeared before the edit</li>
      <li><strong>Corrected text:</strong> The intended version after applying the edit</li>
      <li><strong>Line number:</strong> The line on which the edit occurs. Use <strong>line 0</strong> for titles or headings, and start counting full lines of body text from <strong>line 1</strong></li>
      <li><strong>Page:</strong> A known identifier for the image (e.g., <code>"001.png"</code>), provided alongside the input and not extracted by the model</li>
    </ul>

    <p>
      Models should infer the intent behind handwritten annotations using both
      visual and textual cues. Common markup conventions include:
    </p>

    <ul class="task-markers">
      <li><strong>Insertions:</strong> Indicated by caret marks (<code>^</code>) or added words between lines</li>
      <li><strong>Deletions:</strong> Shown using strikethroughs or crossed-out text</li>
      <li><strong>Replacements:</strong> Circled, underlined, or bracketed text with substitutions nearby</li>
      <li><strong>Punctuation edits:</strong> Handwritten punctuation added, removed, or modified</li>
      <li><strong>Capitalization:</strong> Case changes marked explicitly or via notation</li>
      <li><strong>Reordering:</strong> Text rearranged using arrows, numbering, or caret repositions</li>
    </ul>

    <p>
      This task combines fine-grained visual recognition with natural language
      understanding and domain knowledge of editorial conventions. The goal is
      not just OCR or layout detection, but true interpretation of handwritten
      edits in context.
    </p>

    <div class="example-container">
        <h3 id="example-input">Example Input</h3>

        <div class="example-image centered-container">
            <img src="/001.png" alt="Sample page from Little Dorrit with editorial marks" class="benchmark-example">
            <div class="example-caption">Sample page from Little Dorrit with editorial marks.</div>
        </div>

        <div class="example-results">
            <h3 id="expected-output">Expected Output</h3>
            <p>For the example above, models should identify all ten editorial corrections, producing output like:</p>
            <div class="code-window">
                <div class="code-header"></div>
                <pre><code class="language-json">{
    "image": "001.png",
    "page_number": 5,
    "source": "Little Dorrit",
    "annotator": "pairsys",
    "annotation_date": "2025-04-04",
    "verified": true,
    "edits": [
        {
            "type": "punctuation",
            "original_text": "church bells",
            "corrected_text": "church bells,",
            "line_number": 2,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "wine bottles",
            "corrected_text": "wine-bottles",
            "line_number": 11,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "got through",
            "corrected_text": "got, through",
            "line_number": 14,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "iron bars fashioned",
            "corrected_text": "iron bars, fashioned",
            "line_number": 14,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "grating where",
            "corrected_text": "grating, where",
            "line_number": 17,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "outside and",
            "corrected_text": "outside; and",
            "line_number": 29,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "intact in",
            "corrected_text": "intact, in",
            "line_number": 30,
            "page": "001.png"
        },
        {
            "type": "capitalization",
            "original_text": "indian ocean",
            "corrected_text": "Indian Ocean",
            "line_number": 31,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "was waiting to be fed looking",
            "corrected_text": "was waiting to be fed; looking",
            "line_number": 36,
            "page": "001.png"
        },
        {
            "type": "punctuation",
            "original_text": "bars that",
            "corrected_text": "bars, that",
            "line_number": 36,
            "page": "001.png"
        }
    ]
}</code></pre>
            </div>
        </div>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
        <script>
            hljs.highlightAll();
        </script>
    </div>

    <p class="updated">Last updated: <span id="last-updated">2025-04-04</span></p>
    </div>

    <footer>
        <p>
            For more information, visit the
            <a href="https://github.com/pairsys/little-dorrit-editor">Little Dorrit Editor repository</a>.
            The dataset is available on <a href="https://huggingface.co/datasets/pairsys/little-dorrit-editor">Hugging Face</a>.
        </p>
    </footer>

    <script>
        // Load data from results.json
        let leaderboardData = [];

        // Create and configure the leaderboard table
        const leaderboardTable = new Tabulator("#leaderboard-table", {
            data: leaderboardData,
            layout: "fitColumns",
            headerSort: true,
            initialSort: [{ column: "rank", dir: "asc" }],
            columns: [
                { title: "Rank", field: "rank", sorter: "number", width: 80, headerSort: false },
                {
                    title: "Model",
                    field: "model",
                    formatter: function(cell) {
                        const value = cell.getValue();
                        const row = cell.getRow().getData();
                        let medalClass = "";
                        let medalText = "";

                        if (row.rank === 1) {
                            medalClass = "gold";
                            medalText = "1";
                        } else if (row.rank === 2) {
                            medalClass = "silver";
                            medalText = "2";
                        } else if (row.rank === 3) {
                            medalClass = "bronze";
                            medalText = "3";
                        }

                        const shots = row.shots || 2;
                        const modelWithShots = `${value} (${shots}-shot)`;

                        if (medalClass) {
                            return `<span class="medal ${medalClass}">${medalText}</span>${modelWithShots}`;
                        }
                        return modelWithShots;
                    }
                },
                {
                    title: "F1 Score",
                    field: "f1Score",
                    sorter: "number",
                    hozAlign: "center",
                    formatter: function(cell) {
                        return cell.getValue().toFixed(4);
                    }
                },
                {
                    title: "Precision",
                    field: "precision",
                    sorter: "number",
                    hozAlign: "center",
                    formatter: function(cell) {
                        return cell.getValue().toFixed(4);
                    }
                },
                {
                    title: "Recall",
                    field: "recall",
                    sorter: "number",
                    hozAlign: "center",
                    formatter: function(cell) {
                        return cell.getValue().toFixed(4);
                    }
                },
                { title: "Date", field: "date", sorter: "date", hozAlign: "center" }
            ]
        });

        // Function to load JSON data from results.json
        async function loadResults() {
            try {
                const response = await fetch('results.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error('Error loading results:', error);
                return [];
            }
        }

        // Function to find a model in the results data
        function findModel(results, modelName) {
            return results.find(model => model.model_name === modelName);
        }

        // Function to prepare data for the detailed model performance table
        async function prepareModelPerformanceData() {
            const results = await loadResults();
            const performanceData = [];

            for (const modelData of results) {
                if (!modelData) continue;

                // Add model summary row
                const modelRow = {
                    id: modelData.model_name,
                    model: modelData.model_name,
                    precision: modelData.precision,
                    recall: modelData.recall,
                    f1_score: modelData.f1_score,
                    true_positives: modelData.details.correct_count,
                    false_positives: modelData.details.total_predicted - modelData.details.correct_count,
                    false_negatives: modelData.details.total_ground_truth - modelData.details.correct_count,
                    _children: []
                };

                // Add file-specific rows as children
                if (modelData.details.file_results) {
                    for (const file of modelData.details.file_results) {
                        modelRow._children.push({
                            id: `${modelData.model_name}-${file.file_id}`,
                            model: `File ${file.file_id}`,
                            precision: file.precision,
                            recall: file.recall,
                            f1_score: file.f1_score,
                            true_positives: file.details.correct_count,
                            false_positives: file.details.total_predicted - file.details.correct_count,
                            false_negatives: file.details.total_ground_truth - file.details.correct_count
                        });
                    }
                }

                performanceData.push(modelRow);
            }

            return performanceData;
        }

        // Function to create and configure the model performance table
        async function createModelPerformanceTable() {
            const performanceData = await prepareModelPerformanceData();

            const performanceTable = new Tabulator("#model-performance-table", {
                data: performanceData,
                layout: "fitColumns",
                dataTree: true,
                dataTreeStartExpanded: false,
                dataTreeChildIndent: 20,
                columns: [
                    {
                        title: "Model / File",
                        field: "model",
                        width: 200,
                        resizable: true
                    },
                    {
                        title: "F1 Score",
                        field: "f1_score",
                        hozAlign: "center",
                        formatter: function(cell) {
                            const value = cell.getValue();
                            const formattedValue = value.toFixed(4);

                            let colorClass = "";
                            if (value >= 0.8) {
                                colorClass = "perfect-score";
                            } else if (value >= 0.5) {
                                colorClass = "good-score";
                            } else {
                                colorClass = "low-score";
                            }

                            return `<span><span class="performance-indicator ${colorClass}"></span>${formattedValue}</span>`;
                        }
                    },
                    {
                        title: "Precision",
                        field: "precision",
                        hozAlign: "center",
                        formatter: function(cell) {
                            return cell.getValue().toFixed(4);
                        }
                    },
                    {
                        title: "Recall",
                        field: "recall",
                        hozAlign: "center",
                        formatter: function(cell) {
                            return cell.getValue().toFixed(4);
                        }
                    },
                    {
                        title: "True Positives",
                        field: "true_positives",
                        hozAlign: "center"
                    },
                    {
                        title: "False Positives",
                        field: "false_positives",
                        hozAlign: "center"
                    },
                    {
                        title: "False Negatives",
                        field: "false_negatives",
                        hozAlign: "center"
                    }
                ]
            });

            return performanceTable;
        }

        // Initialize everything
        document.addEventListener("DOMContentLoaded", async function() {
            // Load data from results.json
            const results = await loadResults();

            // Format the data for the leaderboard table
            if (results && results.length > 0) {
                leaderboardData = results.map((model, index) => ({
                    rank: index + 1,
                    model: model.model_name,
                    shots: model.shots || 2,
                    f1Score: model.f1_score,
                    precision: model.precision,
                    recall: model.recall,
                    date: model.date ? model.date.split('T')[0] : 'Unknown'
                }));

                // Update the leaderboard table with real data
                leaderboardTable.setData(leaderboardData);

                // Update metrics dynamically
                if (results.length > 0) {
                    // Find top model (first in sorted results by F1 score)
                    const topModel = results[0];
                    document.getElementById("top-model").textContent = topModel.model_name;
                    document.getElementById("top-model-name").textContent = "Highest F1 Score";

                    // Find model with best F1 score
                    const bestF1Index = results.reduce((maxIndex, model, currentIndex, arr) =>
                        model.f1_score > arr[maxIndex].f1_score ? currentIndex : maxIndex, 0);
                    const bestF1Model = results[bestF1Index];
                    document.getElementById("best-f1-score").textContent = bestF1Model.f1_score.toFixed(4);
                    document.getElementById("best-f1-model").textContent = bestF1Model.model_name;

                    // Find model with best precision
                    const bestPrecisionIndex = results.reduce((maxIndex, model, currentIndex, arr) =>
                        model.precision > arr[maxIndex].precision ? currentIndex : maxIndex, 0);
                    const bestPrecisionModel = results[bestPrecisionIndex];
                    document.getElementById("best-precision").textContent = bestPrecisionModel.precision.toFixed(4);
                    document.getElementById("best-precision-model").textContent = bestPrecisionModel.model_name;

                    // Find model with best recall
                    const bestRecallIndex = results.reduce((maxIndex, model, currentIndex, arr) =>
                        model.recall > arr[maxIndex].recall ? currentIndex : maxIndex, 0);
                    const bestRecallModel = results[bestRecallIndex];
                    document.getElementById("best-recall").textContent = bestRecallModel.recall.toFixed(4);
                    document.getElementById("best-recall-model").textContent = bestRecallModel.model_name;
                }
            }

            // Create detailed performance table
            createModelPerformanceTable();

            // Update the last updated date
            const lastDate = results.length > 0 ? new Date(results[0].date) : new Date();
            document.getElementById("last-updated").textContent = lastDate.toISOString().split('T')[0];
        });
    </script>
</body>
</html>